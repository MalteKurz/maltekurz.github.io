/* Source Themes Academic v4.1.0 | https://sourcethemes.com/academic/ */

;
(function(a){let j=a('.navbar'),c=j.innerHeight();function g(b){b=typeof b=='undefined'||typeof b=='object'?window.location.hash:b,b=b.replace(/:/g,'\\:'),a(b).length&&(a('body').addClass('scrolling'),a('html, body').animate({scrollTop:a(b).offset().top-c},600,function(){a('body').removeClass('scrolling')}))}function l(){let b=a('body'),d=b.data('bs.scrollspy');d&&(d._config.offset=c,b.data('bs.scrollspy',d),b.scrollspy('refresh'))}window.addEventListener("hashchange",g),a('#navbar-main li.nav-item a.nav-link').on('click',function(d){let b=this.hash;b&&a(b).length&&a("#homepage").length>0&&(d.preventDefault(),a('html, body').animate({scrollTop:a(b).offset().top-c},800))}),a('#back_to_top').on('click',function(b){b.preventDefault(),a('html, body').animate({scrollTop:0},800,function(){window.location.hash=""})}),a(document).on('click','.navbar-collapse.show',function(b){let c=a(b.target).is('a')?a(b.target):a(b.target).parent();c.is('a')&&c.attr('class')!='dropdown-toggle'&&a(this).collapse('hide')});let b={},f,d,e=a('#container-publications');e.isotope({itemSelector:'.isotope-item',percentPosition:!0,masonry:{columnWidth:'.grid-sizer'},filter:function(){let b=a(this),c=!f||b.text().match(f),e=!d||b.is(d);return c&&e}});let p=a('.filter-search').keyup(k(function(){f=new RegExp(p.val(),'gi'),e.isotope()}));function k(c,a){let b;return a=a||100,function(){clearTimeout(b);let d=arguments,e=this;function f(){c.apply(e,d)}b=setTimeout(f,a)}}function i(a){let b='';for(let c in a)b+=a[c];return b}a('.pub-filters').on('change',function(){let f=a(this),c=f[0].getAttribute('data-filter-group');if(b[c]=this.value,d=i(b),e.isotope(),c=="pubtype"){let b=a(this).val();b.substr(0,9)=='.pubtype-'?window.location.hash=b.substr(9):window.location.hash=''}});function m(){let c=window.location.hash.replace('#',''),f='*';c!=''&&!isNaN(c)&&(f='.pubtype-'+c);let g='pubtype';b[g]=f,d=i(b),e.isotope(),a('.pubtype-select').val(f)}function n(){if(a('#map').length){let f=a('#map-provider').val(),b=a('#map-lat').val(),c=a('#map-lng').val(),d=parseInt(a('#map-zoom').val()),e=a('#map-dir').val(),g=a('#map-api-key').val();if(f==1){let a=new GMaps({div:'#map',lat:b,lng:c,zoom:d,zoomControl:!0,zoomControlOpt:{style:'SMALL',position:'TOP_LEFT'},panControl:!1,streetViewControl:!1,mapTypeControl:!1,overviewMapControl:!1,scrollwheel:!0,draggable:!0});a.addMarker({lat:b,lng:c,click:function(d){let a='https://www.google.com/maps/place/'+encodeURIComponent(e)+'/@'+b+','+c+'/';window.open(a,'_blank')},title:e})}else{let a=new L.map('map').setView([b,c],d);f==3&&g.length?L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:'mapbox.streets',accessToken:g}).addTo(a):L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(a);let h=L.marker([b,c]).addTo(a),i=b+','+c+'#map='+d+'/'+b+'/'+c+'&layers=N';h.bindPopup(e+'<p><a href="https://www.openstreetmap.org/directions?engine=osrm_car&route='+i+'">Routing via OpenStreetMap</a></p>')}}}function o(b,c){a.getJSON('https://api.github.com/repos/'+c+'/tags').done(function(c){let d=c[0];a(b).append(d.name)}).fail(function(d,a,b){let c=a+", "+b;console.log("Request Failed: "+c)})}function h(){a('body').hasClass('searching')?(a('[id=search-query]').blur(),a('body').removeClass('searching')):(a('body').addClass('searching'),a('.search-results').css({opacity:0,visibility:'visible'}).animate({opacity:1},200),a('#search-query').focus())}function q(){a('body').hasClass('dark')?(a('body').css({opacity:0,visibility:'visible'}).animate({opacity:1},500),a('body').removeClass('dark'),a('link[title=hl-light]')[0].disabled=!1,a('link[title=hl-dark]')[0].disabled=!0,a('.js-dark-toggle i').removeClass('fa-sun'),a('.js-dark-toggle i').addClass('fa-moon'),localStorage.setItem('dark_mode','0')):(a('body').css({opacity:0,visibility:'visible'}).animate({opacity:1},500),a('body').addClass('dark'),a('link[title=hl-light]')[0].disabled=!0,a('link[title=hl-dark]')[0].disabled=!1,a('.js-dark-toggle i').removeClass('fa-moon'),a('.js-dark-toggle i').addClass('fa-sun'),localStorage.setItem('dark_mode','1'))}a(document).ready(function(){let b=0;a('body').hasClass('dark')&&(b=1);let c=parseInt(localStorage.getItem('dark_mode')||b);c?(a('body').addClass('dark'),a('link[title=hl-light]')[0].disabled=!0,a('link[title=hl-dark]')[0].disabled=!1,a('.js-dark-toggle i').removeClass('fa-moon'),a('.js-dark-toggle i').addClass('fa-sun')):(a('body').removeClass('dark'),a('link[title=hl-light]')[0].disabled=!1,a('link[title=hl-dark]')[0].disabled=!0,a('.js-dark-toggle i').removeClass('fa-sun'),a('.js-dark-toggle i').addClass('fa-moon'))}),a(window).on('load',function(){window.location.hash&&(window.location.hash=="#top"?window.location.hash="":a('.projects-container').length||g());let d=a('body');d.scrollspy({offset:c});let b;a(window).resize(function(){clearTimeout(b),b=setTimeout(l,200)}),a('.projects-container').each(function(f,e){let b=a(e),c=b.closest('section'),d;c.find('.isotope').hasClass('js-layout-row')?d='fitRows':d='masonry',b.imagesLoaded(function(){b.isotope({itemSelector:'.isotope-item',layoutMode:d,masonry:{gutter:20},filter:c.find('.default-project-filter').text()}),c.find('.project-filters a').click(function(){let c=a(this).attr('data-filter');return b.isotope({filter:c}),a(this).removeClass('active').addClass('active').siblings().removeClass('active all'),!1}),window.location.hash&&g()})}),a('.pub-filters-select')&&m(),a('.js-cite-modal').click(function(d){d.preventDefault();let b=a(this).attr('data-filename'),c=a('#modal');c.find('.modal-body code').load(b,function(e,d,c){if(d=='error'){let b="Error: ";a('#modal-error').html(b+c.status+" "+c.statusText)}else a('.js-download-cite').attr('href',b)}),c.modal('show')}),a('.js-copy-cite').click(function(b){b.preventDefault();let a=document.createRange(),c=document.querySelector('#modal .modal-body');a.selectNode(c),window.getSelection().addRange(a);try{document.execCommand('copy')}catch(a){console.log('Error: citation copy failed.')}window.getSelection().removeRange(a)}),n(),a('#TableOfContents > ul > li > ul').unwrap().unwrap(),a('#academic-release').length>0&&o('#academic-release',a('#academic-release').data('repo')),a('.js-search').click(function(a){a.preventDefault(),h()}),a(document).on('keydown',function(b){b.which==27?a('body').hasClass('searching')&&h():b.which==191&&b.shiftKey==!1&&!a('input,textarea').is(':focus')&&(b.preventDefault(),h())}),a('.js-dark-toggle').click(function(a){a.preventDefault(),q()})})})(jQuery)